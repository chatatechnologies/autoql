<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <script src="d3.v4.js"></script>
    <script src="d3.tip.js"></script>
    <title></title>
    <style media="screen">
        .domain{
            stroke: #d3d3d352;
        }
        .tick{
            stroke: #d3d3d352;
            fill-opacity: 0.7;
        }
        line{
            stroke-width: 1px;
            stroke: currentColor;
            opacity: 0.15;
            shape-rendering: crispedges;
        }
        text{
            font-family: "Titillium Web", sans-serif;
            letter-spacing: 0.04em;
            fill: #5d5d5d;
        }

        .d3-tip {
            line-height: 1;
            letter-spacing: 0.04em;
            padding: 10px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 2px;
            font-family: "Titillium Web", sans-serif;
            font-size: 13px;
            color: #ececec;
        }
        .title-tip{
            font-weight: bold;
            color: #fff;

        }

        /* Creates a small triangle extender for the tooltip */
        .d3-tip:after {
            box-sizing: border-box;
            display: inline;
            font-size: 10px;
            width: 100%;
            line-height: 1;
            color: rgba(0, 0, 0, 0.8);
            content: "\25BC";
            position: absolute;
            text-align: center;
        }

        /* Style northward tooltips differently */
        .d3-tip.n:after {
            margin: -1px 0 0 0;
            top: 100%;
            left: 0;
        }

        @-webkit-keyframes bounceIn {
            0% {
                opacity: 0;
                -webkit-transform: scale(.3);
            }
            50% {
                opacity: 1;
                -webkit-transform: scale(1.05);
            }
            70% {
                -webkit-transform: scale(.9);
            }
            100% {
                -webkit-transform: scale(1);
            }
        }
        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(.3);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
            70% {
                transform: scale(.9);
            }
            100% {
                transform: scale(1);
            }
        }
        .d3-tip.animate {
            animation: bounceIn 0.2s ease-out;
            -webkit-animation: bounceIn 0.2s ease-out;
        }

        .grid line {stroke: currentColor; stroke-opacity: 1;shape-rendering: crispEdges;}
        .grid path {stroke-width: 0;}

    </style>
</head>
<body>
    <div id="foo" data-containerid="1"></div>
    <script>
    var margin = {top: 5, right: 10, bottom: 50, left: 90},
    width = 450,
    // height = component.parentElement.clientHeight < 600 ? 600 - margin.bottom : component.parentElement.clientHeight - margin.bottom;
    height = 600;
    var myGroups = ["December 30, 2016", "February 27, 2017", "March 30, 2017", "April 29, 2017", "May 30, 2017", "June 29, 2017", "July 30, 2017", "August 30, 2017", "September 29, 2017", "October 30, 2017"];
    var myVars = ["v1", "v2", "v3", "v4", "v5", "v6", "v7", "v8", "v9", "v10"];


    var data = [
        {label: "wire", value: 1900},
        {label: "Tub Surround", value: 1550},
        {label: "AIRCARE 1.6 gal.", value: 1200},
        {label: "AIRCARE Digital", value: -1700},
        {label: "AIRCARE Wick", value: 1200},
        {label: "Adjustable P-Trap", value: 2244},
        {label: "Air Conditioner", value: 4455},
        {label: "Boilers", value: 235},
        {label: "Compressor 1.0", value: -656},
        {label: "FLEXIBLE COUPLING 3 X 2", value: 4564},
        {label: "Granite Countertop - Blue Marble", value: 334},
        {label: "Replacement Toilet", value: 1900},
        {label: "Ridgid - Tube cutter", value: -1550},
        {label: "Seal-A-Crack", value: 12500},
        {label: "Seals", value: 1900},
        {label: "Shower Head - Bronze Meta 1", value: -200},
        {label: "50 Gal Water Tank/ Heater", value: -4055},
        {label: "Thermostat - Residential", value: -2332},
        {label: "Foo", value: 235},
        {label: "Tap Handles - Bronze Metalss", value: 200},
        {label: "Tap Handles - Crystal", value: 2332},
        {label: "SharkBite", value: 235}
    ];

    var svg = d3.select("#foo")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform",
    "translate(" + margin.left + "," + margin.top + ")");


    var x = d3.scaleBand()
    .range([ 0, width ])
    .domain(myGroups)
    .padding(0.01);
    svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x))
    .selectAll("text")
    .style("color", '#fff')
    .attr("transform", "translate(-10,0)rotate(-45)")
    .style("text-anchor", "end");

    // Build X scales and axis:
    var y = d3.scaleBand()
    .range([ height, 0 ])
    .domain(myVars)
    .padding(0.01);
    svg.append("g")
    .call(d3.axisLeft(y));

    var colorScale = d3.scaleLinear()
    .range(["white", "#69b3a2"])
    .domain([1,100])

    //Read the data
    d3.csv("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/heatmap_data.csv", function(data) {

        svg.selectAll()
        .data(data, function(d) {return d.group+':'+d.variable;})
        .enter()
        .append("rect")
        .attr("x", function(d) { return x(d.group) })
        .attr("y", function(d) { return y(d.variable) })
        .attr("width", x.bandwidth() )
        .attr("height", y.bandwidth() )
        .style("fill", function(d) { return colorScale(d.value)} )

    });

    </script>
</body>
</html>
