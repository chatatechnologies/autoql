<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="css/chata-styles.css">
    <link rel="stylesheet" type="text/css" href="css/Dashboard.css">
    <link rel="stylesheet" type="text/css" href="css/Modal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script src="src/popper.min.js"></script>
    <script src="src/tippy.min.js"></script>
    <script src="src/muuri.min.js"></script>

    <!-- <link rel="stylesheet" href="https://unpkg.com/tippy.js@5/dist/backdrop.css" /> -->
    <!-- <script src="https://unpkg.com/web-animations-js@2.3.2/web-animations.min.js"></script> -->
    <script src="https://unpkg.com/muuri@0.8.0/dist/muuri.min.js"></script>
    <script src="src/d3.v4.js"></script>
    <script src="src/svgIcons.js"></script>
    <script src="src/constants.js"></script>
    <script src="src/utils.js"></script>
    <script src="src/Safetynet.js"></script>
    <script src="src/ChataTable.js"></script>
    <script src="src/ChataHeatmapChart.js"></script>
    <script src="src/ChataBubbleChart.js"></script>
    <script src="src/ChataBarChart.js"></script>
    <script src="src/ChataColumnChart.js"></script>
    <script src="src/ChataLineChart.js"></script>
    <script src="src/ChataStackedColumnChart.js"></script>
    <script src="src/ChataStackedBarChart.js"></script>
    <script src="src/ChataGroupedColumnChart.js"></script>
    <script src="src/ChataGroupedLineChart.js"></script>
    <script src="src/ChataGroupedBarChart.js"></script>
    <script src="src/ChataPieChart.js"></script>
    <script src="src/ResponseRenderer.js"></script>
    <script src="src/ChatBar.js"></script>
    <script src="src/ChatDrawer.js"></script>
    <script src="src/Modal.js"></script>
    <script src="src/Tile.js"></script>
    <script src="src/Dashboard.js"></script>
    <!-- <link rel="stylesheet" type="text/css" href="https://ucarecdn.com/fd4b2bdf-fbc1-4ab2-af8b-5a1efc0f7285/chatastyles.css">
    <script src="https://ucarecdn.com/9912723e-ab89-46c9-ba6c-2825821f7111/ChatDrawermin.js"></script> -->
    <!-- <script src="build/ChatDrawer-min.js"></script> -->

    <!-- <link rel="stylesheet" type="text/css" href="https://ucarecdn.com/19dda2d3-4f7a-4e2c-b642-34de287bca09/chatastyles.css">
    <script src="https://ucarecdn.com/2721c373-e848-4f33-8ff7-25a8c75a241e/ChatDrawermin.js"></script> -->
    <style media="screen">
        .my-container{
            display: flex;
            justify-content: center;
            width: 70%;
            /* margin: auto; */
            align-items: center;
            align-content: center;
            flex-direction: column;
            /* margin: 35px 0px; */
        }
        .prop{
            display: flex;
            align-items: center;
            align-content: center;
            justify-content: center;
        }
        .prop-column{
            flex-direction: column;
        }
        .prop.direction-row{
            flex-direction: row;
        }
        .info-text{
            font-size: 10px;
        }
        .info-text-bold{
            font-weight: bold;
            font-size: 10px;
        }
    </style>
</head>
<!-- style="background: #efefef" -->
<body>

    <div class="row">
        <div class="col s12">
            <ul class="tabs">
                <li class="tab col s3"><a class="active" href="#test1">Chat Drawer</a></li>
                <li class="tab col s3"><a class="" href="#test2">Dashboard</a></li>
            </ul>
        </div>
        <div id="test1" class="col s12">

            <div id="chata">
            </div>

            <div class="my-container">
                <div class=""><span class="flow-text">Data source</span></div>
                <div class="prop prop-column">
                    <h6 class="">Demo data</h6>
                    <div class="switch">
                        <label>
                            <input type="checkbox" checked name="demo">
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>
                <div id="login-section" style="display: none;">
                    <div class="">
                        <h5>You must login to access data</h5>
                    </div>
                    <div class="prop prop-column">
                        <h6>Username</h6>
                        <input type="text" id="username" value="" placeholder="" class="">
                    </div>

                    <div class="prop prop-column">
                        <h6>Password</h6>
                        <input type="text" id="password" value="" placeholder="" class="">
                    </div>

                    <div class="">
                        <button type="button" name="button" class="waves-effect waves-light btn blue" id="login" style="width: 80%; display: block; margin: auto;">Login</button>
                    </div>

                    <div class="prop prop-column">
                        <h6>API key</h6>
                        <input type="text" name="apiKey" value="" placeholder="" class="">
                    </div>

                    <div class="prop prop-column">
                        <h6>Customer ID</h6>
                        <input type="text" name="customerId" value="" placeholder="" class="">
                    </div>

                    <div class="prop prop-column">
                        <h6>User ID (email)</h6>
                        <input type="text" name="userId" value="" placeholder="" class="">
                    </div>

                    <div class="prop prop-column">
                        <h6>Domain URL</h6>
                        <input type="text" name="domain" value="" placeholder="" class="">
                    </div>
                </div>

                <div class="">
                    <h4 style="text-align: center;">Drawer Props</h4>
                    <button type="button" name="button" class="waves-effect waves-light btn white black-text" id="reload">Reload Drawer</button>
                    <button type="button" name="button" class="waves-effect waves-light btn blue" onclick="ChatDrawer.openDrawer()">Open Drawer</button>
                </div>

                <div class="prop prop-column">
                    <h6 class="">Show Drawer Handle</h6>
                    <div class="switch">
                        <label>
                            <input type="checkbox" name="showHandle" checked>
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>

                <div class="prop prop-column">
                    <h6 class="">Show Mask</h6>
                    <div class="switch">
                        <label>
                            <input type="checkbox" name="showMask" checked>
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>

                <div class="prop prop-column">
                    <h6 class="">Shift Screen on Open/Close</h6>
                    <div class="switch">
                        <label>
                            <input type="checkbox" name="shiftScreen">
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>


                <div class="">
                    <h6 style="text-align: center;">Theme</h6>
                    <div>
                        <label>
                            <input name="theme" id="light" type="radio" checked />
                            <span>Light</span>
                        </label>
                        <label>
                            <input name="theme" id="dark" type="radio" />
                            <span>Dark</span>
                        </label>
                    </div>
                </div>

                <div class="">
                    <h6 style="text-align: center;">Drawer Placement</h6>
                    <div>
                        <label>
                            <input name="placement" type="radio" value="top" />
                            <span>Top</span>
                        </label>
                        <label>
                            <input name="placement" value="bottom" type="radio" />
                            <span>Bottom</span>
                        </label>
                        <label>
                            <input name="placement" value="left" type="radio" />
                            <span>Left</span>
                        </label>
                        <label>
                            <input name="placement" value="right" type="radio" checked />
                            <span>Right</span>
                        </label>
                    </div>
                </div>

                <div class="prop prop-column">
                    <h6>Currency Code</h6>
                    <span class="info-text">
                        (Must click 'Reload Drawer' to apply this)
                    </span>
                    <input type="text" name="currencyCode" value="USD" placeholder="Currency Code" class="reload-prop">
                </div>

                <div class="prop prop-column">
                    <h6>Language Code</h6>
                    <span class="info-text">
                        (Must click 'Reload Drawer' to apply this)
                    </span>
                    <input type="text" name="languageCode" value="en-US" placeholder="Language Code" class="reload-prop">
                </div>

                <div class="prop prop-column">
                    <h6>Customer Name</h6>
                    <span class="info-text">
                        (Must click 'Reload Drawer' to apply this)
                    </span>
                    <input type="text" name="customerName" value="Oscar" placeholder="Customer Name" class="reload-prop">
                </div>


                <div class="prop prop-column">
                    <h6>Intro message</h6>
                    <span class="info-text">
                        (Must click 'Reload Drawer' to apply this)
                    </span>
                    <input type="text" name="introMessage" value="" placeholder="Intro message" class="reload-prop">
                </div>

                <div class="prop prop-column">
                    <h6 class="">Clear All Messages on Close</h6>
                    <div class="switch">
                        <label>
                            <input type="checkbox" name="clearOnClose">
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>

                <div class="prop prop-column">
                    <h6>Height</h6>
                    <span class="info-text">
                        (Must click 'Reload Drawer' to apply this)
                    </span>
                    <input type="number" name="height" value="500" placeholder="Height" class="reload-prop">
                </div>

                <div class="prop prop-column">
                    <h6>Width</h6>
                    <span class="info-text">
                        (Must click 'Reload Drawer' to apply this)
                    </span>
                    <input type="number" name="width" value="500" placeholder="Width" class="reload-prop">
                </div>


                <div class="prop prop-column">
                    <h6>Title</h6>
                    <span class="info-text">
                        (Must click 'Reload Drawer' to apply this)
                    </span>
                    <input type="text" name="title" value="Data Messenger" placeholder="Title" class="reload-prop">
                </div>

                <div class="prop prop-column">
                    <h6>Font Family</h6>
                    <span class="info-text">
                        (Must click 'Reload Drawer' to apply this)
                    </span>
                    <input type="text" name="fontFamily" value="sans-serif" placeholder="Font Family" class="reload-prop">
                </div>


                <div class="prop prop-column">
                    <h6>Chart Colors</h6>
                    <span class="info-text">
                        (Must click 'Reload Drawer' to apply this)
                    </span>
                    <span class="info-text-bold" style="max-width:650px;">
                        This is an array of colors used for the charts. If the data scale is larger than the color array, it will repeat the colors. Any solid color formats are accepted. Hit "enter" to add a color.
                    </span>
                    <div class="chips" name="chartColors" style="width:550px;">

                    </div>
                </div>

                <div class="prop prop-column">
                    <h6>Light Theme Accent Color</h6>
                    <span class="info-text">
                        (Must click 'Reload Drawer' to apply this)
                    </span>
                    <input type="color" name="accentColor-light" value="#28a8e0" placeholder="Accent Color" style="width:150px;" class="reload-prop">
                </div>

                <div class="prop prop-column">
                    <h6>Dark Theme Accent Color</h6>
                    <span class="info-text">
                        (Must click 'Reload Drawer' to apply this)
                    </span>
                    <input type="color" name="accentColor-dark" value="#525252" placeholder="Accent Color" style="width:150px;" class="reload-prop">
                </div>

                <div class="prop prop-column">
                    <h6>Maximum Number of Messages</h6>
                    <span class="info-text">
                        (Must click 'Reload Drawer' to apply this)
                    </span>
                    <input type="text" name="maxMessages" value="6" placeholder="Maximum Number of Messages" class="reload-prop">
                </div>

                <div class="prop prop-column">
                    <h6 class="">Enable Autocomplete</h6>
                    <div class="switch">
                        <label>
                            <input type="checkbox" checked name="enableAutocomplete">
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>

                <div class="prop prop-column">
                    <h6 class="">Enable Safety Net</h6>
                    <div class="switch">
                        <label>
                            <input type="checkbox" checked name="enableSafetyNet">
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>

                <div class="prop prop-column">
                    <h6 class="">Enable Speech to Text</h6>
                    <div class="switch">
                        <label>
                            <input type="checkbox" checked name="enableVoiceRecord">
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>

                <div class="prop prop-column">
                    <h6 class="">Debug Mode (Shows SQL in the info tooltip)</h6>
                    <div class="switch">
                        <label>
                            <input type="checkbox" checked name="debug">
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>

            </div>

        </div>
        <div id="test2" class="col s12 dashboard-container">

            <div class="dashboard-toolbar-container" style="display: flex; justify-content: center; background: rgb(250, 250, 250); padding: 10px;">
                <button type="button" class="ant-btn" id="stop-editing" style="display:none;">
                    <i class="anticon anticon-stop">
                        <svg viewBox="64 64 896 896" focusable="false" class="" data-icon="stop" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                            <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372
                            0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0
                            372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z">
                            </path>
                        </svg>
                    </i>
                    <span>Stop Editing</span>
                </button>
                <button type="button" class="ant-btn" id="start-editing">
                    <i class="anticon anticon-edit">
                        <svg viewBox="64 64 896 896" focusable="false" class="" data-icon="edit" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                            <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9
                            114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4
                            29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7
                            0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z">
                            </path>
                        </svg>
                    </i>
                    <span>Edit</span>
                </button>
                <button type="button" class="ant-btn" style="margin-left: 10px;" id="execute">
                    <i aria-label="icon: play-circle" class="anticon anticon-play-circle">
                        <svg viewBox="64 64 896 896" focusable="false" class="" data-icon="play-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                            <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z">
                            </path>
                            <path d="M719.4 499.1l-296.1-215A15.9 15.9 0 0 0 398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 0 0 0-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"></path>
                        </svg>
                    </i>
                    <span>Execute Dashboard</span>
                </button>
                <button type="button" class="ant-btn" style="margin-left: 10px;" id="log">
                    <span>Log Current Tile State</span>
                </button>
                <div style="padding-top: 5px; margin-left: 10px;">
                    <div class="switch">
                        Run Dashboard Automatically
                        <label>
                            <input type="checkbox" name="runDashboard" id="runDashboard">
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>

                <button type="button" class="ant-btn ant-btn-primary" style="margin-left: 10px; display: none;" id="add-tile">
                    <i aria-label="icon: plus" class="anticon anticon-plus">
                        <svg viewBox="64 64 896 896" focusable="false" class="" data-icon="plus" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                            <path d="M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"></path>
                            <path d="M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"></path>
                        </svg>
                    </i>
                    <span>Add Tile</span>
                </button>

                <button type="button" class="ant-btn ant-btn-primary" style="margin-left: 10px; display: none;" id="undo">
                    <i aria-label="icon: rollback" class="anticon anticon-rollback">
                        <svg viewBox="64 64 896 896" focusable="false" class="" data-icon="rollback" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                            <path d="M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 0 0 0
                                12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8
                                8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z">
                            </path>
                        </svg>
                    </i>
                    <span>Undo</span>
                </button>
            </div>

            <div class="grid-1">
                <!-- <div class="chata-dashboard-item">
                    <div class="item-content">
                        <div class="dashboard-tile-input-container">
                            <input class="dashboard-tile-input query" placeholder="Query" value="profit by month last year">
                            <input class="dashboard-tile-input title" placeholder="Title (optional)" value="2018 Monthly Profit">
                            <div class="dashboard-tile-play-button">
                                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path>
                                </svg>
                            </div>
                        </div>
                        <div class="dashboard-tile-response-wrapper">
                            <div class="dashboard-tile-response-container">
                                <div class="dashboard-tile-placeholder-text">
                                    <em>Hit "Execute" to run this dashboard</em>
                                </div>
                            </div>
                        </div>
                        <span class="resize-handler">
                        </span>
                    </div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">
                        <div class="dashboard-tile-title-container">
                            <span class="dashboard-tile-title">2018 Monthly Profits</span>
                            <div class="dashboard-tile-title-divider">
                            </div>
                        </div>
                        <div class="dashboard-tile-response-wrapper editing small">
                            <div class="dashboard-tile-response-container">
                                <div class="dashboard-tile-loading-container">
                                    <div class="dashboard-tile-placeholder-text">
                                        <em>Hit "Execute" to run this dashboard</em>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">3</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">4</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">5</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">6</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">7</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">8</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">9</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">10</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">11</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">12</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">13</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">14</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">15</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">16</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">17</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">18</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">19</div>
                </div>
                <div class="chata-dashboard-item">
                    <div class="item-content">20</div>
                </div> -->
            </div>

        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
    var _token = `eyJ0eXAiOiAiSldUIiwgImFsZyI6ICJSUzI1NiIsICJraWQiOiAiNzUxZmYzY2YxMjA2ZGUwODJhNzM1MjY5OTI2ZDg0NTgzYjcyOTZmNCJ9.eyJpYXQiOiAxNTcxNDM4ODU1LCAiZXhwIjogMTU3MTQ0OTY1NSwgImlzcyI6ICJkZW1vMy1qd3RhY2NvdW50QHN0YWdpbmctMjQ1NTE0LmlhbS5nc2VydmljZWFjY291bnQuY29tIiwgImF1ZCI6ICJkZW1vMy1zdGFnaW5nLmNoYXRhLmlvIiwgInN1YiI6ICJkZW1vMy1qd3RhY2NvdW50QHN0YWdpbmctMjQ1NTE0LmlhbS5nc2VydmljZWFjY291bnQuY29tIiwgImVtYWlsIjogImRlbW8zLWp3dGFjY291bnRAc3RhZ2luZy0yNDU1MTQuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20ifQ==.BJEuLY4oZ0DkfwS4S4rxC5EQeHzAT-KZKjklm9KWYxn76MP_zh4gU-fvcK4sl82S38kiFYBuDGbT0h9_VQ4PXpcj-dj1FviMcROYa7UITIFYzajj4xRjvAwWG8tXYZNqPRXMbNP2LTbXIt3nqch7Tq2FrYuv6pqHhJeHgzXWH9FX3g3F5cMQXEdfM-CDtWJhOUX87CHId9TzzGindPlDdbAS22RHGj4NulKR89iRwyIubITHDVUVXHJl9LUBk3AOZ69J90GdrIQbj8bKU79SEjiQ-M2idtpMSv5-EqmoPx-aVaoD-3S-NMIz_nBPLvaQX4qEo0PDrbY0nr3SXLUbyQ==`;
        var chata = ChatDrawer.init('chata', {
            token: _token,
            apiKey: 'AIzaSyD_CVuP8l980M1dzUFjaoeLo8_EcL9aDa4',
            customerId: 'locate-demo1',
            userId: 'nmoore@chata.ai',
            domain: 'https://locate-staging.chata.io',
            isVisible: false,
            shiftScreen: false,
            placement: 'right',
            width: 500,
            height: 600,
            theme: 'light',
            showHandle: true,
            showMask: true,
            maskClosable: true,
            customerName: 'Oscar',
            maxMessages: 6,
            clearOnClose: false,
            enableVoiceRecord: true,
            enableAutocomplete: true,
            enableSafetyNet: true,
            enableDrilldowns: true,
            demo: true,
            debug: true,
            // languageCode: 'ja-JP',
            // currencyCode: 'JPY',
            onMaskClick: function(){
                ChatDrawer.closeDrawer();
            }
        });
        var instances;
        document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelector('.chips');
            var tabs = document.querySelector('.tabs');
            var instance = M.Tabs.init(tabs, {});
            instances = M.Chips.init(elems, {
                data: [
                    {tag: '#355C7D'},
                    {tag: '#6C5B7B'},
                    {tag: '#C06C84'},
                    {tag: '#F67280'},
                    {tag: '#F8B195'},
                ]
            });
        });

        var showHandle = document.querySelector('[name="showHandle"]')
        var showMask = document.querySelector('[name="showMask"]')
        var shiftScreen = document.querySelector('[name="shiftScreen"]')
        var theme = document.querySelectorAll('[name="theme"]')
        var placement = document.querySelectorAll('[name="placement"]')
        var enableAutocomplete = document.querySelector('[name="enableAutocomplete"]')
        var enableVoiceRecord = document.querySelector('[name="enableVoiceRecord"]')
        var enableSafetyNet = document.querySelector('[name="enableSafetyNet"]')
        var debug = document.querySelector('[name="debug"]')
        var clearOnClose = document.querySelector('[name="clearOnClose"]')
        var demo = document.querySelector('[name="demo"]')
        var login = document.getElementById('login')

        login.onclick = function(event){
            var user = document.getElementById('username').value;
            var password = document.getElementById('password').value;
            var apiKey = document.querySelector('[name="apiKey"]').value;
            var customerId = document.querySelector('[name="customerId"]').value;
            var userId = document.querySelector('[name="userId"]').value;
            var domain = document.querySelector('[name="domain"]').value;
            login.style.display = 'none';
            ChatDrawer.options.apiKey = apiKey;
            ChatDrawer.options.customerId = customerId;
            ChatDrawer.options.userId = userId;
            ChatDrawer.options.domain = domain;

            var xhr = new XMLHttpRequest();
            const URL = 'https://backend-staging.chata.io/api/v1/login';
            var formData = new FormData();

            formData.append("username", user);
            formData.append("password", password);

            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4){
                    var xhr2 = new XMLHttpRequest();
                    var loginToken = xhr.responseText;

                    xhr2.onreadystatechange = function(){
                        if(xhr2.readyState === 4){
                            console.log(xhr2.responseText);
                            login.style.display = 'block';
                            if(xhr2.status != 200){
                                alert(xhr2.responseText);
                            }else{
                                ChatDrawer.options.token = xhr2.responseText;
                                alert('Login Sucessful!');
                            }
                        }
                    }
                    xhr2.open('GET', 'https://backend-staging.chata.io/api/v1/jwt');
                    xhr2.setRequestHeader("Authorization", `Bearer ${loginToken}`);
                    xhr2.send();
                }
            };

            xhr.open('POST', URL);
            xhr.send(formData);
        }

        demo.onchange = function(event){
            ChatDrawer.options.demo = event.target.checked;
            var loginSection = document.getElementById('login-section');
            if(!ChatDrawer.options.demo){
                loginSection.style.display = 'block';
            }else{
                loginSection.style.display = 'none';
            }
        }

        showHandle.onchange = function(event){
            ChatDrawer.options.showHandle = event.target.checked;
            if(event.target.checked){
                if(ChatDrawer.options.isVisible){
                    ChatDrawer.drawerButton.style.display = 'none';
                }else{
                    ChatDrawer.drawerButton.style.display = 'flex';
                }
            }else{
                ChatDrawer.drawerButton.style.display = 'none';
            }
        }

        shiftScreen.onchange = function(event){
            ChatDrawer.options.shiftScreen = event.target.checked;
        }

        showMask.onchange = function(event){
            ChatDrawer.options.showMask = event.target.checked;
            if(event.target.checked){
                if(ChatDrawer.options.isVisible){
                    ChatDrawer.wrapper.style.opacity = .3;
                    ChatDrawer.wrapper.style.height = '100%';
                }else{
                    ChatDrawer.wrapper.style.opacity = 0;
                    ChatDrawer.wrapper.style.height = 0;
                }
            }else{
                ChatDrawer.wrapper.style.opacity = 0;
                ChatDrawer.wrapper.style.height = 0;
            }
        }

        for (var i = 0; i < theme.length; i++) {
            theme[i].onchange = function(event){
                const themeStyles = event.target.id === 'light' ? LIGHT_THEME : DARK_THEME;
                for (let property in themeStyles) {
                    document.documentElement.style.setProperty(
                        property,
                        themeStyles[property],
                    );
                }
                ChatDrawer.options.theme = event.target.id;
            }
        }

        enableAutocomplete.onchange = function(event){
            ChatDrawer.options.enableAutocomplete = event.target.checked;
        }

        enableSafetyNet.onchange = function(event){
            ChatDrawer.options.enableSafetyNet = event.target.checked;
        }

        enableVoiceRecord.onchange = function(event){
            ChatDrawer.options.enableVoiceRecord = event.target.checked;
            var display = ChatDrawer.options.enableVoiceRecord ? 'block' : 'none';
            var voiceButton = document.getElementById('chata-voice-record-button');
            voiceButton.style.display = display;
        }

        debug.onchange = function(event){
            ChatDrawer.options.debug = event.target.checked;
        }

        clearOnClose.onchange = function(event){
            ChatDrawer.options.clearOnClose = event.target.checked;
        }
        for (var i = 0; i < placement.length; i++) {
            placement[i].onchange = function(event){
                ChatDrawer.rootElem.removeAttribute('style');

                ChatDrawer.drawerButton.classList.remove(ChatDrawer.options.placement + '-btn');
                ChatDrawer.options.placement = event.target.value;
                ChatDrawer.drawerButton.classList.add(ChatDrawer.options.placement + '-btn');
            }
        }

        var reload = document.getElementById('reload');
        reload.onclick = function(event){
            var propsEls = document.getElementsByClassName('reload-prop');
            for (var i = 0; i < propsEls.length; i++) {
                if(propsEls[i].value != ''){
                    ChatDrawer.options[propsEls[i].name] = propsEls[i].value;
                }else if(propsEls[i].name == 'introMessage' && propsEls[i].value == ''){
                    ChatDrawer.options.introMessage = "Hi " + ChatDrawer.options.customerName+ " I'm  here to help you access, search and analyze your data.";
                }if(ChatDrawer.options.theme == 'light' && propsEls[i].name == 'accentColor-light'){
                    ChatDrawer.options.accentColor = propsEls[i].value;
                }else if (ChatDrawer.options.theme == 'dark' && propsEls[i].name == 'accentColor-dark'){
                    ChatDrawer.options.accentColor = propsEls[i].value;
                }
            }
            var chartColors = [];
            for (var i = 0; i < instances.chipsData.length; i++) {
                chartColors.push(instances.chipsData[i]['tag']);
            }
            ChatDrawer.drawerButton.remove();
            ChatDrawer.rootElem.remove();
            ChatDrawer.options.chartColors = chartColors;
            var div = document.createElement('div');
            div.setAttribute('id', 'chata');
            document.getElementsByTagName('body')[0].appendChild(div);
            document.removeEventListener('click', ChatDrawer.clickHandler);
            document.removeEventListener('dblclick', ChatDrawer.drilldownHandler);
            var newDrawer = ChatDrawer.init('chata', ChatDrawer.options);
        }

        var dashboard = new Dashboard('.grid-1', {
            chartColors: ['#355C7D', '#6C5B7B', '#C06C84', '#f67280', '#F8B195'],
            demo: true,
            token: undefined,
            apiKey: '',
            customerId: '',
            userId: '',
            domain: '',
            tiles: [
                {
                    key: '0',
                    w: 6,
                    h: 7,
                    x: 0,
                    y: 0,
                    query: 'Sales by customer per month',
                    title: 'Customer Sales',
                    displayType: 'stacked_bar'
                },
                {
                    key: '1',
                    w: 3,
                    h: 3,
                    x: 3,
                    y: 0,
                    query: 'total profit last month',
                    title: 'Profit - Previous Month'
                },
                {
                    key: '2',
                    w: 3,
                    h: 3,
                    x: 6,
                    y: 0,
                    query: 'total profit ytd',
                    title: 'Profit - YTD'
                },
                {
                    key: '3',
                    w: 3,
                    h: 3,
                    x: 9,
                    y: 0,
                    query: 'last years profit',
                    title: 'Profit - Previous Year'
                },
                {
                    key: '99',
                    w: 3,
                    h: 3,
                    x: 0,
                    y: 2,
                    query: 'total sales',
                    title: 'All Sales'
                },
                {
                    key: '4',
                    w: 6,
                    h: 5,
                    x: 0,
                    y: 2,
                    query: 'profit by month ytd',
                    displayType: 'line',
                    title: 'Monthly YTD Profit'
                },
                {
                    key: '5',
                    w: 6,
                    h: 5,
                    x: 6,
                    y: 2,
                    query: 'profit by month last year',
                    displayType: 'line',
                    title: '2018 Monthly Profit'
                },
                {
                    key: '6',
                    w: 6,
                    h: 5,
                    x: 0,
                    y: 7,
                    query: 'profit by class this year',
                    displayType: 'column',
                    title: 'Total Profit by Class (2019)'
                },
                {
                    key: '7',
                    w: 6,
                    h: 5,
                    x: 6,
                    y: 7,
                    query: 'profit by customer this year',
                    displayType: 'bar',
                    title: 'Total Profit by Customer (2019)'
                },
                {
                    key: '8',
                    w: 12,
                    h: 5,
                    x: 0,
                    y: 10,
                    query: 'total profit by class by month ytd',
                    displayType: 'stacked_column',
                    title: 'Product Profitability'
                },
                {
                    key: '9',
                    w: 12,
                    h: 8,
                    x: 0,
                    y: 12,
                    query: 'total profit by customer by month ytd',
                    displayType: 'stacked_bar',
                    title: 'Customer Profitability'
                },
                {
                    key: '10',
                    w: 12,
                    h: 5,
                    x: 0,
                    y: 19,
                    query: 'total profit by customer by month ytd',
                    displayType: 'heatmap',
                    title: 'Customer Profitability'
                }
            ],
            onChangeCallback: function() {
                console.log('Dashboard onChangeCallback');
            },
            executeOnMount: false,
            executeOnStopEditing: false,
            // fontFamily: 'monospace'
        });


        var startEditing = document.getElementById('start-editing')
        var stopEditing = document.getElementById('stop-editing')
        var addTile = document.getElementById('add-tile')
        var undo = document.getElementById('undo')
        var runDashboard = document.getElementById('runDashboard')
        var execute = document.getElementById('execute')
        var log = document.getElementById('log')


        startEditing.onclick = function(){
            dashboard.startEditing();
            this.style.display = 'none';
            stopEditing.style.display = 'block';
            addTile.style.display = 'block';
            undo.style.display = 'block';
        }

        stopEditing.onclick = function(){
            dashboard.stopEditing();
            this.style.display = 'none';
            addTile.style.display = 'none';
            undo.style.display = 'none';
            startEditing.style.display = 'block';
        }

        addTile.onclick = function(){
            dashboard.addTile({title: '', query: '', w: 6})
        }

        runDashboard.onchange = function(event){
            dashboard.options.executeOnStopEditing = event.target.checked
            if(event.target.checked){
                dashboard.run();
            }
        }

        execute.onclick = function(event){
            dashboard.run();
        }

        undo.onclick = function(){
            dashboard.undo();
        }

        log.onclick = function(){
            console.log(dashboard.tiles);
        }

    </script>



</body>
</html>
